---
import type { CaseStudy } from "../../lib/api/types";

interface Props {
  caseItem: CaseStudy;
}

const { caseItem } = Astro.props;

const title = caseItem.title || caseItem.clientName;
const coverAlt =
  caseItem.coverImageAlt || `Caso de éxito de ${caseItem.clientName || title}`;
const href = `/casos/${caseItem.slug}`;
---

<a
  href={href}
  class="group flex flex-col h-full overflow-hidden rounded-2xl border border-black/10 dark:border-white/10 bg-white/70 dark:bg-white/5 backdrop-blur-sm shadow-lg transition-all duration-300 hover:shadow-2xl hover:-translate-y-1"
>
  <!-- Imagen limpia sin texto -->
  <div class="relative aspect-[16/9] overflow-hidden">
    {
      caseItem.coverImage ? (
        <img
          src={caseItem.coverImage}
          alt={coverAlt}
          width="800"
          height="450"
          loading="lazy"
          class="h-full w-full object-cover object-left transition-transform duration-500 ease-out group-hover:scale-110"
        />
      ) : (
        <div class="h-full w-full bg-gradient-to-br from-blue-500 via-purple-600 to-pink-500" />
      )
    }

    <!-- Gradiente sutil estético (opcional) -->
    <div
      class="absolute inset-0 bg-gradient-to-t from-black/25 via-transparent to-transparent"
      aria-hidden="true"
    >
    </div>

    <!-- Badge categoría/industria (opcional, arriba izquierda) -->
    {
      caseItem.industry && (
        <div class="absolute top-3 left-3 inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-white/90 dark:bg-black/60 text-slate-900 dark:text-white backdrop-blur-md border border-black/10 dark:border-white/20">
          {caseItem.industry}
        </div>
      )
    }
  </div>

  <!-- Contenido debajo de imagen -->
  <div class="p-6 flex flex-col flex-1 min-h-[180px]">
    <!-- Cliente/Empresa -->
    {
      caseItem.clientName && (
        <p class="text-xs font-semibold uppercase tracking-wider text-slate-500 dark:text-slate-400">
          {caseItem.clientName}
        </p>
      )
    }

    <!-- Título del caso -->
    <h3
      class="text-xl md:text-2xl font-bold text-slate-900 dark:text-white line-clamp-2 leading-tight mt-2"
    >
      {title}
    </h3>

    <!-- Descripción corta (1-2 líneas) -->
    {
      caseItem.summary && (
        <p class="text-sm text-slate-600 dark:text-slate-300 line-clamp-2 leading-relaxed mt-3 flex-grow">
          {caseItem.summary}
        </p>
      )
    }

    <!-- Link "Ver caso →" - Siempre al fondo -->
    <div
      class="flex items-center gap-2 text-sm font-semibold text-blue-600 dark:text-blue-400 transition-all duration-300 group-hover:gap-3 mt-auto pt-4"
    >
      <span>Ver caso</span>
      <svg
        class="w-4 h-4 transition-transform duration-300 group-hover:translate-x-1"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
        aria-hidden="true"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2.5"
          d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
      </svg>
    </div>
  </div>
</a>
