---
import type { Service } from "../data/mock";
import ServiceCard from "./ServiceCard.astro";

interface Props {
  services: Service[];
  whatsappNumber: string;
}

const { services, whatsappNumber } = Astro.props;
const categories = [
  {
    key: "web",
    label: "Experiencias web + automatizaciones",
    description:
      "Sitios Astro + Strapi listos para escalar, conectar formularios, reservas y WhatsApp.",
  },
  {
    key: "mantencion_pc",
    label: "Mantenci칩n y limpieza de equipos",
    description:
      "Cuidamos tus rigs gamer y el parque computacional de tu empresa para que rindan al 100%.",
  },
  {
    key: "digital",
    label: "Presencia digital y contenido",
    description:
      "SEO local, contenidos en Strapi y redes con piezas de alto impacto.",
  },
] as const;
const sortedServices = [...services].sort((a, b) => (a.order ?? 0) - (b.order ?? 0));
---

<section id="servicios" class="py-20 space-y-8" data-animate="reveal">
  <div class="section-shell flex flex-col gap-4">
    <p class="pill w-fit bg-primary/10 border-primary/40 text-highlight">
      Planes listos para lanzar
    </p>
    <div class="flex flex-col gap-3 max-w-3xl">
      <h2 class="text-3xl sm:text-4xl font-bold text-slate-900 dark:text-white">
        Servicios agrupados por lo que m치s necesitas
      </h2>
      <p class="text-slate-700 dark:text-slate-300">
        Armamos paquetes claros: webs que convierten, mantenci칩n para equipos
        gamer y operaci칩n de tu presencia digital desde Strapi.
      </p>
    </div>
  </div>
  <div class="section-shell space-y-12">
    {
      categories.map((category) => {
        const group = sortedServices.filter((service) => service.type === category.key);
        if (!group.length) return null;
        return (
          <section class="space-y-5">
            <div class="flex flex-col gap-2">
              <h3 class="text-2xl font-semibold text-slate-900 dark:text-white">
                {category.label}
              </h3>
              <p class="text-slate-600 dark:text-slate-300 text-sm">
                {category.description}
              </p>
            </div>
            <div class="grid md:grid-cols-2 xl:grid-cols-3 gap-6">
              {group.map((service) => (
                <ServiceCard
                  service={service}
                  whatsappNumber={whatsappNumber}
                />
              ))}
            </div>
          </section>
        );
      })
    }
  </div>
</section>
