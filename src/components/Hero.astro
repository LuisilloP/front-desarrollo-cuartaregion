---
import type { SiteSettings } from "../data/mock";
import { buildWhatsAppLink } from "../lib/utils";
import { Icon } from "astro-icon/components";
import HeroBackgroundSlideshow from "./hero/HeroBackgroundSlideshow";

interface Props {
  siteSettings: SiteSettings;
}

const { siteSettings } = Astro.props;
const region = siteSettings.region || "Region Metropolitana";
const whatsappUrl = buildWhatsAppLink(
  siteSettings.whatsappNumber,
  "Hola! Quiero una web y automatizacion para mi negocio."
);

const heroImages = [
  {
    src: "/images/hero/coquimbo.jpg",
    alt: "Bahia y puerto de Coquimbo",
    position: "center",
  },
  {
    src: "/images/hero/serena.png",
    alt: "Atardecer en La Serena",
    position: "center",
  },
  {
    src: "/images/hero/astro.png",
    alt: "Cielo estrellado en Valle del Elqui",
    position: "center",
  },
];

const heroBg = heroImages[0];
const slides = heroImages.length ? heroImages : [heroBg];
---

<section
  id="inicio"
  class="relative isolate min-h-screen overflow-hidden text-contrast"
  data-animate="reveal"
>
  <HeroBackgroundSlideshow
    client:load
    slides={slides}
    intervalMs={7000}
    transitionMs={1200}
  />

  <div
    class="section-shell relative z-10 flex min-h-screen items-center py-24 sm:py-28 lg:py-32"
  >
    <div class="max-w-3xl space-y-8 mt-32">
      <div
        class="inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-4 py-2 text-sm backdrop-blur"
      >
        <span
          class="h-2 w-2 rounded-full bg-highlight shadow-[0_0_0_6px_rgba(255,255,255,0.08)]"
        ></span>
        Agencia local - {region}
      </div>
      <h1
        class="text-4xl sm:text-5xl lg:text-6xl font-display font-semibold leading-[1.05] tracking-tight"
      >
        Desarrollamos la web o sistema que tu negocio necesita
      </h1>
      <p class="text-lg sm:text-xl text-contrast/85 max-w-2xl leading-relaxed">
        Landing pages, sitios administrables y sistemas de gestion.
        Automatizamos procesos con WhatsApp para que vendas mas.
      </p>
      <div class="flex flex-wrap gap-4">
        <a
          class="inline-flex items-center gap-3 px-7 py-3.5 rounded-full bg-white text-secondary font-semibold shadow-[0_18px_40px_rgba(0,0,0,0.35)] transition hover:-translate-y-0.5 hover:shadow-[0_25px_60px_rgba(0,0,0,0.35)] focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white"
          href={whatsappUrl}
          target="_blank"
          rel="noreferrer"
        >
          {siteSettings.primaryCTA || "Agenda una llamada"}
          <span aria-hidden="true" class="text-lg leading-none">-&gt;</span>
        </a>
        <a
          class="inline-flex items-center gap-3 px-7 py-3.5 rounded-full border border-white/35 bg-white/5 text-contrast/90 transition hover:bg-white/12 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-white/70"
          href="#servicios"
        >
          {siteSettings.secondaryCTA || "Ver servicios"}
        </a>
      </div>
      <div class="flex flex-wrap gap-6 text-sm text-contrast/70">
        <div class="flex items-center gap-2">
          <span class="h-2 w-2 rounded-full bg-white/60"></span>
          Integraciones con WhatsApp, CRM y pagos
        </div>
        <div class="flex items-center gap-2">
          <span class="h-2 w-2 rounded-full bg-white/60"></span>
          Lanzamientos en semanas, no meses
        </div>
      </div>
    </div>
  </div>
</section>
