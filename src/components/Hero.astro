---
import type { SiteSettings } from "../data/mock";
import { buildWhatsAppLink } from "../lib/utils";
import { Icon } from "astro-icon/components";
import HeroBackgroundSlideshow from "./hero/HeroBackgroundSlideshow";

interface Props {
  siteSettings: SiteSettings;
}

const { siteSettings } = Astro.props;
const region = siteSettings.region || "Region de Coquimbo";
const whatsappUrl = buildWhatsAppLink(
  siteSettings.whatsappNumber,
  "Hola! Quiero potenciar mi web y automatizar ventas."
);

const heroImages = [
  {
    src: "/images/hero/coquimbo.jpg",
    alt: "Bahia y puerto de Coquimbo",
    position: "center",
  },
  {
    src: "/images/hero/serena.png",
    alt: "Atardecer en La Serena",
    position: "center",
  },
  {
    src: "/images/hero/astro.png",
    alt: "Cielo estrellado en Valle del Elqui",
    position: "center",
  },
];

const heroBg = heroImages[0];
const slides = heroImages.length ? heroImages : [heroBg];
---

<section
  id="inicio"
  class="relative isolate min-h-screen overflow-hidden text-contrast"
  data-animate="reveal"
>
  <HeroBackgroundSlideshow
    client:load
    slides={slides}
    intervalMs={7000}
    transitionMs={1200}
  />

  <div
    class="section-shell relative z-10 flex min-h-screen items-center py-24 sm:py-28 lg:py-32"
  >
    <div class="max-w-3xl space-y-8 mt-32">
      <div
        class="inline-flex items-center gap-2 rounded-full border border-contrast/25 bg-contrast/10 px-4 py-2 text-sm text-contrast backdrop-blur"
      >
        <span
          class="h-2 w-2 rounded-full bg-highlight shadow-[0_0_0_6px_rgba(255,255,255,0.08)]"
        ></span>
        Agencia local - {region}
      </div>
      <h1
        class="text-4xl sm:text-5xl lg:text-6xl font-display font-semibold leading-[1.05] tracking-tight"
      >
        Webs, sistemas y automatizaciones que impulsan ventas
      </h1>
      <p class="text-lg sm:text-xl text-contrast/85 max-w-2xl leading-relaxed">
        Disenamos experiencias que convierten: landings, sitios administrables y flujos WhatsApp conectados a tu CRM.
      </p>
      <div class="flex flex-wrap gap-4">
        <a
          class="inline-flex items-center gap-3 px-7 py-3.5 rounded-full bg-[#25D366] text-white font-semibold shadow-soft transition hover:-translate-y-0.5 hover:shadow-lg focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-[#25D366]"
          href={whatsappUrl}
          target="_blank"
          rel="noreferrer"
        >
          <Icon name="simple-icons:whatsapp" class="h-4 w-4 text-white" aria-hidden="true" />
          {siteSettings.primaryCTA || "Cotizar por WhatsApp"}
          <span aria-hidden="true" class="text-lg leading-none">-&gt;</span>
        </a>
        <a
          class="inline-flex items-center gap-3 px-7 py-3.5 rounded-full border border-contrast/30 bg-contrast/10 text-contrast transition backdrop-blur hover:bg-contrast/15 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-contrast/40"
          href="#servicios"
        >
          {siteSettings.secondaryCTA || "Ver soluciones"}
        </a>
      </div>
      <div class="flex flex-wrap gap-6 text-sm text-contrast/70">
        <div class="flex items-center gap-2">
          <span class="h-2 w-2 rounded-full bg-contrast/70"></span>
          Estrategia, diseno y tecnologia en un solo equipo
        </div>
        <div class="flex items-center gap-2">
          <span class="h-2 w-2 rounded-full bg-contrast/70"></span>
          Lanzamientos en semanas con soporte local
        </div>
      </div>
    </div>
  </div>
</section>
