--- 
import { Icon } from "astro-icon/components";
import type { SiteSettings, HeroSectionContent } from "../lib/api/types";
import { buildWhatsAppLink } from "../lib/utils";
import HeroBackgroundSlideshow from "./hero/HeroBackgroundSlideshow.tsx";

interface Props {
  siteSettings: SiteSettings;
  content: HeroSectionContent;
}

const { siteSettings, content } = Astro.props;
const whatsappUrl = buildWhatsAppLink(
  siteSettings.whatsappNumber,
  "Hola! Quiero potenciar mi web y automatizar ventas."
);

const heroImages = [
  { src: "/images/hero/coquimbo.jpg", alt: "Bahia y puerto de Coquimbo" },
  { src: "/images/hero/serena.png", alt: "Atardecer en La Serena" },
  { src: "/images/hero/astro.png", alt: "Cielo estrellado en Valle del Elqui" },
  { src: "/images/hero/cielo.jpg", alt: "Vista de La Serena desde el cielo" },
];
---

<section id="inicio" class="relative h-screen min-h-[700px] w-full overflow-hidden">
  <!-- Background Slideshow -->
  <div class="absolute inset-0 z-0">
    <HeroBackgroundSlideshow client:load slides={heroImages} intervalMs={7000} transitionMs={1200} />
  </div>

  <!-- Dark Overlay -->
  <div class="absolute inset-0 z-10 bg-gradient-to-t from-black/70 via-black/50 to-transparent"></div>

  <!-- Content -->
  <div class="relative z-20 flex h-full flex-col items-center justify-center text-center text-white p-4">
    <div class="flex max-w-4xl flex-col items-center gap-y-6">
      <div class="animate-fade-in-up inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-4 py-2 text-sm backdrop-blur-sm">
        <span class="relative flex h-2 w-2">
          <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-sky-300 opacity-75"></span>
          <span class="relative inline-flex rounded-full h-2 w-2 bg-sky-400"></span>
        </span>
        {content.eyebrow}
      </div>

      <h1
        class="text-4xl font-bold leading-tight tracking-tight text-white sm:text-5xl md:text-6xl lg:text-7xl"
        style="animation: fade-in-in-up 0.8s 0.2s both cubic-bezier(0.25, 0.46, 0.45, 0.94);"
      >
        {content.title}
      </h1>

      <p
        class="max-w-2xl text-lg text-white/80 md:text-xl"
        style="animation: fade-in-up 0.8s 0.4s both cubic-bezier(0.25, 0.46, 0.45, 0.94);"
      >
        {content.description}
      </p>

      <div
        class="flex flex-col gap-4 sm:flex-row"
        style="animation: fade-in-up 0.8s 0.6s both cubic-bezier(0.25, 0.46, 0.45, 0.94);"
      >
        <a
          href={whatsappUrl}
          target="_blank"
          rel="noreferrer"
          class="inline-flex items-center justify-center gap-2 rounded-full bg-[#25D366] px-6 py-3.5 text-base font-semibold text-white shadow-lg transition-transform duration-200 hover:scale-105"
        >
          <Icon name="simple-icons:whatsapp" class="h-5 w-5" />
          <span>{siteSettings.primaryCTA || "Cotizar por WhatsApp"}</span>
        </a>
        <a
          href="#servicios"
          class="inline-flex items-center justify-center gap-2 rounded-full border border-white/30 bg-white/10 px-6 py-3.5 text-base font-semibold text-white backdrop-blur-md transition-colors duration-200 hover:bg-white/20"
        >
          <span>{siteSettings.secondaryCTA || "Ver soluciones"}</span>
          <Icon name="lucide:arrow-right" class="h-4 w-4" />
        </a>
      </div>
    </div>
  </div>
</section>

<style>
  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in-up {
    animation: fade-in-up 0.8s both cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }
</style>
