---
import type { SiteSettings } from "../data/mock";
import { buildWhatsAppLink } from "../lib/utils";
import { Icon } from "astro-icon/components";

type UseCaseIcon = "calendar" | "package" | "messageCircle" | "layout";

interface Props {
  siteSettings: SiteSettings;
}

const { siteSettings } = Astro.props;
const whatsappUrl = buildWhatsAppLink(siteSettings.whatsappNumber, "Hola! Quiero un proyecto segun uno de los casos tipicos.");
const useCases: { title: string; description: string; icon: UseCaseIcon }[] = [
  {
    title: "Reservas y agenda",
    description: "Confirmaciones automaticas + recordatorios por WhatsApp y correo.",
    icon: "calendar"
  },
  {
    title: "Inventario y ventas",
    description: "Stock, movimientos, alertas y reportes semanales.",
    icon: "package"
  },
  {
    title: "Leads por WhatsApp",
    description: "Formulario -> WhatsApp -> CRM/planilla, con etiquetas y seguimiento.",
    icon: "messageCircle"
  },
  {
    title: "Sitio administrable",
    description: "Servicios, precios, blog y SEO local con panel de edicion.",
    icon: "layout"
  }
];
---

<section class="py-12 md:py-16" data-animate="reveal">
  <div class="section-shell">
    <div class="grid items-start gap-10 lg:grid-cols-[1.1fr,1fr] lg:gap-12">
      <div class="space-y-5">
        <p class="inline-flex items-center gap-2 rounded-full border border-primary/30 bg-gradient-to-r from-primary/10 to-accent/10 px-3 py-1.5 text-[11px] font-semibold text-highlight shadow-sm">
          <span class="h-2 w-2 rounded-full bg-highlight shadow-[0_0_0_4px] shadow-highlight/20"></span>
          Casos frecuentes
        </p>
        <div class="space-y-2">
          <h2 class="text-3xl sm:text-4xl font-semibold text-content leading-snug tracking-tight">Que necesitas hoy? Lo armamos a medida</h2>
          <p class="text-sm sm:text-base text-muted">Elige un caso tipico y lo adaptamos a tu negocio.</p>
        </div>
        <div class="flex flex-col gap-2 sm:flex-row sm:items-center">
          <a
            href={whatsappUrl}
            target="_blank"
            rel="noreferrer"
            class="inline-flex w-full sm:w-auto items-center justify-center gap-2 rounded-full bg-[#25D366] px-5 py-3 text-sm font-semibold text-white shadow-md transition hover:-translate-y-0.5 hover:shadow-lg"
            aria-label="Quiero mi caso"
          >
            <Icon name="simple-icons:whatsapp" class="h-4 w-4 text-white" aria-hidden="true" />
            Quiero mi caso
          </a>
        </div>
      </div>

      <div class="grid grid-cols-1 gap-4 sm:gap-5">
        {useCases.map((item) => (
          <a
            href={whatsappUrl}
            target="_blank"
            rel="noreferrer"
            class="group flex items-start gap-4 md:gap-5 rounded-xl border border-border/70 bg-card/80 dark:bg-surface-strong/70 p-5 shadow-soft backdrop-blur-sm transition hover:-translate-y-0.5 hover:border-primary/40 hover:shadow-lg"
          >
            <div class="shrink-0 grid place-items-center h-10 w-10 md:h-12 md:w-12 rounded-xl bg-gradient-to-br from-primary/15 to-accent/12 text-highlight ring-1 ring-primary/20">
              {(() => {
                switch (item.icon) {
                  case "calendar":
                    return (
                      <svg viewBox="0 0 24 24" fill="none" class="h-5 w-5 md:h-6 md:w-6" aria-hidden="true">
                        <rect x="4" y="5" width="16" height="15" rx="2" stroke="currentColor" stroke-width="1.6" />
                        <path d="M8 3v4M16 3v4M4 10h16" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" />
                        <path d="M9 13h2v2H9zM13 13h2v2h-2z" fill="currentColor" />
                      </svg>
                    );
                  case "package":
                    return (
                      <svg viewBox="0 0 24 24" fill="none" class="h-5 w-5 md:h-6 md:w-6" aria-hidden="true">
                        <path
                          d="M4 7.5L12 12l8-4.5M4 7.5l8-4.5 8 4.5M4 7.5V16l8 4.5 8-4.5V7.5"
                          stroke="currentColor"
                          stroke-width="1.6"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        />
                        <path d="M12 12v8.5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
                      </svg>
                    );
                  case "messageCircle":
                    return (
                      <svg viewBox="0 0 24 24" fill="none" class="h-5 w-5 md:h-6 md:w-6" aria-hidden="true">
                        <path
                          d="M20 11.5c0 4.142-3.582 7.5-8 7.5-.88 0-1.727-.127-2.52-.364-.32-.096-.48-.144-.602-.159a1 1 0 0 0-.307.01c-.122.027-.253.101-.515.248l-2.684 1.5.605-2.58c.115-.49.172-.735.163-.941a1 1 0 0 0-.146-.458c-.099-.166-.26-.305-.58-.584C4.588 15.63 4 13.986 4 12c0-4.142-3.582-7.5 8-7.5s8 3.358 8 7.5Z"
                          stroke="currentColor"
                          stroke-width="1.6"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                        />
                        <path d="M9 11.5h6M9 9h3" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" />
                      </svg>
                    );
                  case "layout":
                    return (
                      <svg viewBox="0 0 24 24" fill="none" class="h-5 w-5 md:h-6 md:w-6" aria-hidden="true">
                        <rect x="4" y="4" width="16" height="16" rx="2" stroke="currentColor" stroke-width="1.6" />
                        <path d="M9.5 4v16M4 10h16" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" />
                      </svg>
                    );
                  default:
                    return null;
                }
              })()}
            </div>
            <div class="space-y-1">
              <h3 class="text-base font-semibold text-content leading-snug">{item.title}</h3>
              <p class="text-xs text-muted leading-relaxed line-clamp-2 md:line-clamp-1">{item.description}</p>
            </div>
          </a>
        ))}
      </div>
    </div>
  </div>
</section>
