---
import type { Review } from "../data/mock";

interface Props {
  reviews: Review[];
}

const { reviews } = Astro.props;
const sorted = [...reviews].sort((a, b) => (a.order ?? 0) - (b.order ?? 0));
---

<section id="resenas" class="py-20 space-y-6" data-animate="reveal">
  <div class="section-shell flex flex-col gap-3 max-w-3xl">
    <p class="pill w-fit bg-primary/10 border-primary/40 text-highlight">Clientes felices</p>
    <h2 class="text-3xl sm:text-4xl font-bold text-slate-900 dark:text-white">Reseñas</h2>
    <p class="text-slate-700 dark:text-slate-300">Historias de dueños que venden más con sitios rápidos y automatizados.</p>
  </div>
  <div class="section-shell grid lg:grid-cols-3 gap-6 auto-rows-fr">
    {sorted.map((item) => (
      <article class="card flex flex-col gap-3">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-lg font-semibold text-slate-900 dark:text-white">{item.clientName}</p>
            <p class="text-sm text-highlight">{item.business}</p>
          </div>
          <div class="flex items-center gap-1 text-amber-300" aria-label={`Rating ${item.rating} de 5`}>
            {Array.from({ length: 5 }).map((_, idx) => (
              <span aria-hidden="true">{idx < item.rating ? "★" : "☆"}</span>
            ))}
          </div>
        </div>
        <p class="text-slate-700 dark:text-slate-200 text-sm leading-relaxed">“{item.quote}”</p>
      </article>
    ))}
  </div>
</section>
