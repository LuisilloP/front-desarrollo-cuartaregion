---
import Layout from "../layouts/Layout.astro";
import Navbar from "../components/Navbar.astro";
import Hero from "../components/Hero.astro";
import ServicesSection from "../components/ServicesSection.astro";
import HostingSection from "../components/HostingSection.astro";
import CasesSection from "../components/CasesSection.astro";
import ReviewsSection from "../components/ReviewsSection.astro";
import ContactSection from "../components/ContactSection.astro";
import FAQSection from "../components/FAQSection.astro";
import Footer from "../components/Footer.astro";
import WhatsAppFloatingButton from "../components/WhatsAppFloatingButton.astro";
import {
  fetchCases,
  fetchFaqs,
  fetchReviews,
  fetchServices,
  fetchSiteSettings
} from "../lib/strapi";

const siteSettings = await fetchSiteSettings();
const services = await fetchServices();
const cases = await fetchCases();
const reviews = await fetchReviews();
const faqs = await fetchFaqs();
---

<Layout title={siteSettings.siteName} description={siteSettings.tagline} siteSettings={siteSettings}>
  <Navbar siteSettings={siteSettings} />
  <main class="space-y-8">
    <Hero siteSettings={siteSettings} />
    <ServicesSection services={services} whatsappNumber={siteSettings.whatsappNumber} />
    <HostingSection siteSettings={siteSettings} />
    <CasesSection cases={cases} />
    <ReviewsSection reviews={reviews} />
    <ContactSection siteSettings={siteSettings} />
    <FAQSection faqs={faqs} />
  </main>
  <Footer siteSettings={siteSettings} />
  <WhatsAppFloatingButton whatsappNumber={siteSettings.whatsappNumber} message="Hola! Quiero cotizar mi web con ustedes." />
</Layout>
